// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.12/esri/copyright.txt for details.
//>>built
require({cache:{"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(h,n,e,p,g,c){h=p("dijit._OnDijitClickMixin",null,{connect:function(e,b,q){return this.inherited(arguments,[e,"ondijitclick"==b?c:b,q])}});h.a11yclick=c;return h})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(h,n,e,p,g,c,l){var b={_isElementShown:function(b){var a=
p.get(b);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=e.get(b,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return e.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var a;try{var c=b.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;a=c.body}catch(l){try{a=b.contentWindow.document.body}catch(z){return!1}}return a&&("true"==a.contentEditable||
a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==b.contentEditable}},effectiveTabIndex:function(c){return e.get(c,"disabled")?void 0:e.has(c,"tabIndex")?+e.get(c,"tabIndex"):b.hasDefaultTabStop(c)?0:void 0},isTabNavigable:function(c){return 0<=b.effectiveTabIndex(c)},isFocusable:function(c){return-1<=b.effectiveTabIndex(c)},_getTabNavigable:function(q){function a(d){return d&&"input"==d.tagName.toLowerCase()&&d.type&&"radio"==d.type.toLowerCase()&&d.name&&d.name.toLowerCase()}
var k,l,z,n,p,r,d={},F=b._isElementShown,D=b.effectiveTabIndex,u=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(!(1!=b.nodeType||9>=c("ie")&&"HTML"!==b.scopeName||!F(b))){var f=D(b);if(0<=f){if(0==f)k||(k=b),l=b;else if(0<f){if(!z||f<n)n=f,z=b;if(!p||f>=r)r=f,p=b}f=a(b);e.get(b,"checked")&&f&&(d[f]=b)}"SELECT"!=b.nodeName.toUpperCase()&&u(b)}};F(q)&&u(q);return{first:d[a(k)]||k,last:d[a(l)]||l,lowest:d[a(z)]||z,highest:d[a(p)]||p}},getFirstInTabbingOrder:function(c,a){var e=b._getTabNavigable(n.byId(c,
a));return e.lowest?e.lowest:e.first},getLastInTabbingOrder:function(c,a){var e=b._getTabNavigable(n.byId(c,a));return e.last?e.last:e.highest}};g.mixin(l,b);return b})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(h,n,e,p){function g(b){if((b.keyCode===h.ENTER||b.keyCode===h.SPACE)&&!/input|button|textarea/i.test(b.target.nodeName))for(b=b.target;b;b=b.parentNode)if(b.dojoClick)return!0}var c;e(document,"keydown",function(b){g(b)?(c=b.target,b.preventDefault()):
c=null});e(document,"keyup",function(b){g(b)&&b.target==c&&(c=null,e.emit(b.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,metaKey:b.metaKey,altKey:b.altKey,_origType:b.type}))});var l=function(b,c){b.dojoClick=!0;return e(b,"click",c)};l.click=l;l.press=function(b,c){var a=e(b,p.press,function(a){("mousedown"!=a.type||n.isLeft(a))&&c(a)}),k=e(b,"keydown",function(a){(a.keyCode===h.ENTER||a.keyCode===h.SPACE)&&c(a)});return{remove:function(){a.remove();k.remove()}}};
l.release=function(b,c){var a=e(b,p.release,function(a){("mouseup"!=a.type||n.isLeft(a))&&c(a)}),k=e(b,"keyup",function(a){(a.keyCode===h.ENTER||a.keyCode===h.SPACE)&&c(a)});return{remove:function(){a.remove();k.remove()}}};l.move=p.move;return l})},"esri/layers/ServiceGeneratedFeatureCollection":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/webMercatorUtils ../renderers/SimpleRenderer ./layer ./FeatureLayer ../dijit/PopupTemplate".split(" "),
function(h,n,e,p,g,c,l,b,q,a,k,w,z,x,y){h=h([z],{declaredClass:"esri.layers._ServiceGeneratedFeatureCollection",constructor:function(a,d){this.pointSymbol=d&&d.pointSymbol;this.polylineSymbol=d&&d.polylineSymbol;this.polygonSymbol=d&&d.polygonSymbol;this._outSR=d&&(d.outSpatialReference||d.outSR)||new q({wkid:4326});this._options=e.mixin({},d)},parse:function(){console.error("parse function has not been implemented")},getFeatureLayers:function(){var a=[];this._fLayers&&(a=a.concat(this._fLayers));
return a},onRefresh:function(){},onOpacityChange:function(){},refresh:function(){this.loaded&&(this._map&&!this._io&&this.visible)&&this._createLayer()},_createLayer:function(a){var d=this;this._fireUpdateStart();a=this.parse(a);a.addCallback(function(a){d._io=null;d._initLayer(a)});a.addErrback(function(a){d._io=null;a=e.mixin(Error(),a);a.message="Unable to load resource: "+d.url+" "+(a.message||"");d._fireUpdateEnd(a);d.onError(a)})},_initLayer:function(b){this.loaded&&this._removeInternalLayers();
this.name=b.name;this.description=b.description;this.snippet=b.snippet;this.defaultVisibility=void 0!==b.visibility?this.visible=!!b.visibility:this.visible=!0;this.featureInfos=b.featureInfos;this.fullExtent=this.initialExtent=new a(b.lookAtExtent);this.copyright=b.author||b.copyright;var d;if((b=e.getObject("featureCollection.layers",!1,b))&&0<b.length)this._fLayers=[],p.forEach(b,function(a,b){var c=e.getObject("featureSet.features",!1,a);c&&0<c.length&&(d=e.mixin({outFields:["*"],infoTemplate:a.popupInfo?
new y(a.popupInfo):null,editable:!1},this._options),d.id&&(d.id=d.id+"_"+b),a.layerDefinition.capabilities="Query,Data",c=new x(a,d),c.geometryType&&(this["_"+c.geometryType]=c),this._fLayers.push(c))},this),0===this._fLayers.length&&delete this._fLayers;this.items=[];this._esriGeometryPoint&&(this.items=this.items.concat(this._esriGeometryPoint.graphics),this.pointSymbol&&(b=new w(this.pointSymbol),this._esriGeometryPoint.setRenderer(b)));this._esriGeometryPolyline&&(this.items=this.items.concat(this._esriGeometryPolyline.graphics),
this.polylineSymbol&&(b=new w(this.polylineSymbol),this._esriGeometryPolyline.setRenderer(b)));this._esriGeometryPolygon&&(this.items=this.items.concat(this._esriGeometryPolygon.graphics),this.polygonSymbol&&(b=new w(this.polygonSymbol),this._esriGeometryPolygon.setRenderer(b)));this._fireUpdateEnd();this.loaded&&(this._addInternalLayers(),this.onRefresh())},_addInternalLayers:function(){var a=this._map;this._fireUpdateStart();var d=a.spatialReference,b=this._outSR,c;if(d.wkid)c=d._isWebMercator()&&
b._isWebMercator()||d.wkid===b.wkid;else if(d.wkt)c=d.wkt===b.wkt;else{console.log("_setMap - map has invalid spatial reference");return}if(!c)if(d._isWebMercator()&&4326===b.wkid)this._converter=k.geographicToWebMercator;else if(b._isWebMercator()&&4326===d.wkid)this._converter=k.webMercatorToGeographic;else{console.log("_setMap - unsupported workflow. Spatial reference of the map and layer do not match, and the conversion cannot be done on the client.");return}(d=this._fLayers)&&0<d.length&&p.forEach(d,
function(d){if(this._converter){var b=d.graphics,f,c,B=b?b.length:0;for(f=0;f<B;f++)(c=b[f].geometry)&&b[f].setGeometry(this._converter(c))}a.addLayer(d)},this);this.setVisibility(this.visible);this._fireUpdateEnd()},_removeInternalLayers:function(){var a=this._map;a&&p.forEach(this.getFeatureLayers(),a.removeLayer,a)},setScaleRange:function(a,d){this.inherited(arguments);p.forEach(this.getFeatureLayers(),function(b){b.setScaleRange(a,d)});this._options.minScale=this.minScale;this._options.maxScale=
this.maxScale},setOpacity:function(a){this.opacity!=a&&(p.forEach(this.getFeatureLayers(),function(d){d.setOpacity(a)}),this.opacity=this._options.opacity=a,this.onOpacityChange(a))},onVisibilityChange:function(a){this._fireUpdateStart();p.forEach(this.getFeatureLayers(),function(d){d.setVisibility(a)});this._fireUpdateEnd()},_setMap:function(a,d){this.inherited(arguments);this._map=a;var b=this._div=g.create("div",null,d);c.set(b,"position","absolute");this._addInternalLayers();this.evaluateSuspension();
return b},_unsetMap:function(a,d){this._io&&this._io.cancel();n.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var b=this._div;b&&(d.removeChild(b),g.destroy(b));this._div=null;this.inherited(arguments)}});l("extend-esri")&&e.setObject("layers._ServiceGeneratedFeatureCollection",h,b);return h})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(h,n,e,p,g,c,
l,b,q,a){function k(a,b,f){return y&&f?function(a,d){return c(a,f,d)}:d?function(d,f){var v=c(d,b,function(a){f.call(this,a);m=(new Date).getTime()}),s=c(d,a,function(a){(!m||(new Date).getTime()>m+1E3)&&f.call(this,a)});return{remove:function(){v.remove();s.remove()}}}:function(d,b){return c(d,a,b)}}function w(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function z(d,b,m){var s=w(d.target);if(D=!d.target.disabled&&s&&s.dojoClick)if(t=(u="useTarget"==D)?s:d.target,u&&d.preventDefault(),
f=d.changedTouches?d.changedTouches[0].pageX-a.global.pageXOffset:d.clientX,A=d.changedTouches?d.changedTouches[0].pageY-a.global.pageYOffset:d.clientY,B=("object"==typeof D?D.x:"number"==typeof D?D:0)||4,C=("object"==typeof D?D.y:"number"==typeof D?D:0)||4,!F){F=!0;var k=function(d){D=u?e.isDescendant(a.doc.elementFromPoint(d.changedTouches?d.changedTouches[0].pageX-a.global.pageXOffset:d.clientX,d.changedTouches?d.changedTouches[0].pageY-a.global.pageYOffset:d.clientY),t):D&&(d.changedTouches?d.changedTouches[0].target:
d.target)==t&&Math.abs((d.changedTouches?d.changedTouches[0].pageX-a.global.pageXOffset:d.clientX)-f)<=B&&Math.abs((d.changedTouches?d.changedTouches[0].pageY-a.global.pageYOffset:d.clientY)-A)<=C};a.doc.addEventListener(b,function(d){k(d);u&&d.preventDefault()},!0);a.doc.addEventListener(m,function(d){k(d);if(D){v=(new Date).getTime();var a=u?t:d.target;"LABEL"===a.tagName&&(a=e.byId(a.getAttribute("for"))||a);var b=d.changedTouches?d.changedTouches[0]:d,f=document.createEvent("MouseEvents");f._dojo_click=
!0;f.initMouseEvent("click",!0,!0,d.view,d.detail,b.screenX,b.screenY,b.clientX,b.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,0,null);setTimeout(function(){c.emit(a,"click",f);v=(new Date).getTime()},0)}},!0);d=function(d){a.doc.addEventListener(d,function(a){!a._dojo_click&&((new Date).getTime()<=v+1E3&&!("INPUT"==a.target.tagName&&p.contains(a.target,"dijitOffScreen")))&&(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),"click"==d&&(("INPUT"!=a.target.tagName||"radio"==
a.target.type||"checkbox"==a.target.type)&&"TEXTAREA"!=a.target.tagName&&"AUDIO"!=a.target.tagName&&"VIDEO"!=a.target.tagName)&&a.preventDefault())},!0)};d("click");d("mousedown");d("mouseup")}}var x=5>l("ios"),y=l("pointer-events")||l("MSPointer"),r=function(){var d={},a;for(a in{down:1,move:1,up:1,cancel:1,over:1,out:1})d[a]=l("MSPointer")?"MSPointer"+a.charAt(0).toUpperCase()+a.slice(1):"pointer"+a;return d}(),d=l("touch-events"),F,D,u=!1,t,f,A,B,C,v,m,s;y?q(function(){a.doc.addEventListener(r.down,
function(d){z(d,r.move,r.up)},!0)}):d&&q(function(){function d(a){var b=g.delegate(a,{bubbles:!0});6<=l("ios")&&(b.touches=a.touches,b.altKey=a.altKey,b.changedTouches=a.changedTouches,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.targetTouches=a.targetTouches);return b}s=a.body();a.doc.addEventListener("touchstart",function(a){m=(new Date).getTime();var d=s;s=a.target;c.emit(d,"dojotouchout",{relatedTarget:s,bubbles:!0});c.emit(s,"dojotouchover",{relatedTarget:d,bubbles:!0});z(a,
"touchmove","touchend")},!0);c(a.doc,"touchmove",function(b){m=(new Date).getTime();var f=a.doc.elementFromPoint(b.pageX-(x?0:a.global.pageXOffset),b.pageY-(x?0:a.global.pageYOffset));f&&(s!==f&&(c.emit(s,"dojotouchout",{relatedTarget:f,bubbles:!0}),c.emit(f,"dojotouchover",{relatedTarget:s,bubbles:!0}),s=f),c.emit(f,"dojotouchmove",d(b))||b.preventDefault())});c(a.doc,"touchend",function(b){m=(new Date).getTime();var f=a.doc.elementFromPoint(b.pageX-(x?0:a.global.pageXOffset),b.pageY-(x?0:a.global.pageYOffset))||
a.body();c.emit(f,"dojotouchend",d(b))})});n={press:k("mousedown","touchstart",r.down),move:k("mousemove","dojotouchmove",r.move),release:k("mouseup","dojotouchend",r.up),cancel:k(b.leave,"touchcancel",y?r.cancel:null),over:k("mouseover","dojotouchover",r.over),out:k("mouseout","dojotouchout",r.out),enter:b._eventHandler(k("mouseover","dojotouchover",r.over)),leave:b._eventHandler(k("mouseout","dojotouchout",r.out))};return h.touch=n})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(h,n,e,p,g,c,l,b,q){var a=g.delegate(b,{mouseenter:c.enter,mouseleave:c.leave,keypress:e._keypress}),k;e=p("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||
this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var e=!0,k=this.attachScope||this,d=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(d)for(var F=d.split(/\s*,\s*/);d=F.shift();)g.isArray(k[d])?k[d].push(a):k[d]=a,e="containerNode"!=d,this._attachPoints.push(d);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){d=b.split(/\s*,\s*/);for(F=g.trim;b=d.shift();)if(b){var l=
null;-1!=b.indexOf(":")?(l=b.split(":"),b=F(l[0]),l=F(l[1])):b=F(b);l||(l=b);this._attachEvents.push(c(a,b,g.hitch(k,l)))}}return e},_attach:function(b,c,e){c=c.replace(/^on/,"").toLowerCase();c="dijitclick"==c?k||(k=h("./a11yclick")):a[c]||c;return l(b,c,e)},_detachTemplateNodes:function(){var a=this.attachScope||this;n.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];n.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});g.extend(q,{dojoAttachEvent:"",dojoAttachPoint:""});return e})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),function(h,n,e,p,g,c,l,b,q,a,k,w,z,x,y,r){h=h(null,{declaredClass:"esri.PopupInfo",initialize:function(a,b){if(a){n.mixin(this,
b);this.info=a;this.title=this.getTitle;this.content=this.getContent;var c=this._fieldLabels={},u=this._fieldsMap={};a.fieldInfos&&e.forEach(a.fieldInfos,function(a){c[a.fieldName]=a.label;u[a.fieldName]=a});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(a.title&&-1!==a.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return p.fromJson(p.toJson(this.info))},getTitle:function(){},getContent:function(){},getComponents:function(a){var b=this.info,c=new l,u,t;
b.fieldInfos&&(t=e.filter(b.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this));t&&0<t.length&&(u=this._getRelatedRecords({graphic:a,fieldsInfo:t}));u?u.always(n.hitch(this,function(){c.resolve(this._getPopupValues(a))})):c.resolve(this._getPopupValues(a));return c.promise},_getPopupValues:function(b,c){var k=this.info,u=b.getLayer(),t=n.clone(b.attributes)||{},f=n.clone(t),A=k.fieldInfos,B="",C="",v,m,s,l,q,p=u&&u._getDateOpts&&u._getDateOpts().properties,h={dateFormat:{properties:p,
formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};if(this._relatedInfo)for(l in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(l)){var g=this._relatedInfo[l],E=this._relatedLayersInfo[l];g&&(e.forEach(g.relatedFeatures,function(a){for(q in a.attributes)if(a.attributes.hasOwnProperty(q)&&"esriRelCardinalityOneToOne"===E.relation.cardinality){var b=this._toRelatedFieldName([E.relation.id,q]);t[b]=f[b]=a.attributes[q]}},this),e.forEach(g.relatedStatsFeatures,function(a){for(q in a.attributes)if(a.attributes.hasOwnProperty(q)){var b=
this._toRelatedFieldName([E.relation.id,q]);t[b]=f[b]=a.attributes[q]}},this))}A&&e.forEach(A,function(a){m=a.fieldName;f[m]=this._formatValue(f[m],m,h);p&&(a.format&&a.format.dateFormat)&&(a=e.indexOf(p,m),-1<a&&p.splice(a,1))},this);if(u){l=u.types;var r=(g=u.typeIdField)&&t[g];for(m in t)if(t.hasOwnProperty(m)&&-1===m.indexOf(this._relatedFieldPrefix)&&(s=t[m],a.isDefined(s))){var x=this._getDomainName(u,b,l,r,m,s);a.isDefined(x)?f[m]=x:m===g&&(x=this._getTypeName(u,b,s),a.isDefined(x)&&(f[m]=
x))}}k.title&&(B=this._processFieldsInLinks(this._fixTokens(k.title),t),B=n.trim(a.substitute(f,B,h)||""));if(c)return{title:B};k.description&&(C=this._processFieldsInLinks(this._fixTokens(k.description),t),C=n.trim(a.substitute(f,C,h)||""));A&&(v=[],e.forEach(A,function(b){(m=b.fieldName)&&b.visible&&v.push([b.label||m,a.substitute(f,"${"+m+"}",h)||""])}));var z,w;k.mediaInfos&&(z=[],e.forEach(k.mediaInfos,function(b){w=0;s=b.value;switch(b.type){case "image":var d=s.sourceURL,d=d&&n.trim(a.substitute(t,
this._fixTokens(d)));w=!!d;break;case "piechart":case "linechart":case "columnchart":case "barchart":w=e.some(s.fields,function(b){return a.isDefined(t[b])||-1!==b.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(w){b=n.clone(b);s=b.value;var d=b.title?this._processFieldsInLinks(this._fixTokens(b.title),t):"",m=b.caption?this._processFieldsInLinks(this._fixTokens(b.caption),t):"";b.title=d?n.trim(a.substitute(f,d,h)||""):"";b.caption=m?n.trim(a.substitute(f,m,h)||
""):"";if("image"===b.type)s.sourceURL=a.substitute(t,this._fixTokens(s.sourceURL)),s.linkURL&&(s.linkURL=n.trim(a.substitute(t,this._fixTokens(s.linkURL))||""));else{var v,c;e.forEach(s.fields,function(a,b){if(-1!==a.indexOf(this._relatedFieldPrefix))c=this._getRelatedChartInfos(a,s,t,h),c instanceof Array?s.fields=c:s.fields[b]=c;else{var d=t[a],d=void 0===d?null:d;v=t[s.normalizeField]||0;d&&v&&(d/=v);s.fields[b]={y:d,tooltip:(this._fieldLabels[a]||a)+":\x3cbr/\x3e"+this._formatValue(d,a,h,!!v)}}},
this)}z.push(b)}},this));return{title:B,description:C,fields:v&&v.length?v:null,mediaInfos:z&&z.length?z:null,formatted:f,editSummary:u&&u.getEditSummary?u.getEditSummary(b):""}},_getRelatedChartInfos:function(a,b,c,u){var k,f,A,B,C,v;k=[];v=this._fromRelatedFieldName(a);C=v[0];f=this._relatedInfo[C];C=this._relatedLayersInfo[C];f&&e.forEach(f.relatedFeatures,function(f){f=f.attributes;var s,e;for(e in f)if(f.hasOwnProperty(e)&&e===v[1]){s={};B=f[e];b.normalizeField&&(A=-1!==b.normalizeField.indexOf(this._relatedFieldPrefix)?
f[this._fromRelatedFieldName(b.normalizeField)[1]]:c[b.normalizeField]);B&&A&&(B/=A);if(b.tooltipField)if(-1!==b.tooltipField.indexOf(this._relatedFieldPrefix)){var C=this._fromRelatedFieldName(b.tooltipField)[1];s.tooltip=f[C]+":\x3cbr/\x3e"+this._formatValue(B,f[C],u,!!A)}else s.tooltip=(this._fieldLabels[a]||a)+":\x3cbr/\x3e"+this._formatValue(B,b.tooltipField,u,!!A);else s.tooltip=B;s.y=B;k.push(s)}},this);return"esriRelCardinalityOneToMany"===C.relation.cardinality||"esriRelCardinalityManyToMany"===
C.relation.cardinality?k:k[0]},getAttachments:function(a){var b=a.getLayer();a=a.attributes;if(this.info.showAttachments&&(b&&b.hasAttachments&&b.objectIdField)&&(a=a&&a[b.objectIdField]))return b.queryAttachmentInfos(a)},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"[^\"]+\"/ig,_fixTokens:function(a){return a.replace(/(\{[^\{\r\n]+\})/g,"$$$1")},_processFieldsInLinks:function(b,c){return b&&
b.replace(this._reHref,function(b){return b=a.substitute(c,b)})},_formatValue:function(b,c,k,u){var l=this._fieldsMap[c],f=l&&l.format;c="number"===typeof b&&-1===e.indexOf(k.dateFormat.properties,c)&&(!f||!f.dateFormat);if(!a.isDefined(b)||!l||!a.isDefined(f))return c?this._forceLTR(b):b;var A="",B=[],l=f.hasOwnProperty("places")||f.hasOwnProperty("digitSeparator"),C=f.hasOwnProperty("digitSeparator")?f.digitSeparator:!0;if(l)A="NumberFormat",B.push("places: "+(a.isDefined(f.places)&&(!u||0<f.places)?
Number(f.places):"Infinity")),B.length&&(A+="("+B.join(",")+")");else if(f.dateFormat)A="DateFormat"+this._insertOffset(this._dateFormats[f.dateFormat]||this._dateFormats.shortDateShortTime);else return c?this._forceLTR(b):b;b=a.substitute({myKey:b},"${myKey:"+A+"}",k)||"";l&&!C&&r.group&&(b=b.replace(RegExp("\\"+r.group,"g"),""));return c?this._forceLTR(b):b},_forceLTR:function(a){var c=b("ie");return c&&10>=c?a:"\x3cspan class\x3d'esriNumericValue'\x3e"+a+"\x3c/span\x3e"},_insertOffset:function(b){b&&
(b=a.isDefined(this.utcOffset)?b.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):b);return b},_getDomainName:function(a,b,c,e,k,f){return(a=a.getDomain&&a.getDomain(k,{feature:b}))&&a.codedValues?a.getName(f):null},_getTypeName:function(a,b,c){return(a=a.getType&&a.getType(b))&&a.name},_getRelatedRecords:function(a){var b=a.graphic,c=new l,e;this._relatedLayersInfo?this._queryRelatedLayers(b).then(n.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),n.hitch(this,this._handlerErrorResponse,
c)):this._getRelatedLayersInfo(a).then(n.hitch(this,function(a){for(e in a)a.hasOwnProperty(e)&&a[e]&&(this._relatedLayersInfo[e].relatedLayerInfo=a[e]);this._queryRelatedLayers(b).then(n.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),n.hitch(this,this._handlerErrorResponse,c))}),n.hitch(this,this._handlerErrorResponse,c));return c.promise},_getRelatedLayersInfo:function(a){var b=a.fieldsInfo,c,k,l={};c=a.graphic.getLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});
e.forEach(b,function(a){var b,d,k,v;b=this._fromRelatedFieldName(a.fieldName);d=b[0];b=b[1];d&&(this._relatedLayersInfo[d]||(e.some(c.relationships,function(a){if(a.id==d)return v=a,!0}),v&&(this._relatedLayersInfo[d]={relation:v,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[d]&&(this._relatedLayersInfo[d].relatedFields.push(b),a.statisticType&&(k=new y,k.statisticType=a.statisticType,k.onStatisticField=b,k.outStatisticFieldName=b,this._relatedLayersInfo[d].outStatistics.push(k))))},
this);for(k in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(k)&&this._relatedLayersInfo[k]&&(a=this._relatedLayersInfo[k].relation,a=c.url.replace(/[0-9]+$/,a.relatedTableId),this._relatedLayersInfo[k].relatedLayerUrl=a,l[k]=w({url:a,content:{f:"json"},callbackParamName:"callback"}));return q(l)},_queryRelatedLayers:function(a){var b={},c;for(c in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(c)&&(b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]}));
return q(b)},_queryRelatedLayer:function(a){var b,c,k,l,f,A,B,C,v,m;b=a.graphic;c=b.getLayer().url.match(/[0-9]+$/g)[0];C=a.relatedInfo;B=C.relatedLayerInfo;v=C.relatedLayerUrl;m=C.relation;e.some(B.relationships,function(a){if(a.relatedTableId===parseInt(c,10))return k=a,!0},this);k&&(a=new z,e.some(B.fields,function(a){if(a.name===k.keyField)return f=-1!==e.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)?"number":"string",!0}),l="string"===
f?k.keyField+"\x3d'"+b.attributes[m.keyField]+"'":k.keyField+"\x3d"+b.attributes[m.keyField],a.where=l,a.outFields=C.relatedFields,C.outStatistics&&(0<C.outStatistics.length&&B.supportsStatistics)&&(A=new z,A.where=a.where,A.outFields=a.outFields,A.outStatistics=C.outStatistics),b=new x(v),l=[],l.push(b.execute(a)),A&&l.push(b.execute(A)));return q(l)},_setRelatedRecords:function(b,c){this._relatedInfo=[];for(var k in c)if(c.hasOwnProperty(k)&&c[k]){var e=c[k];this._relatedInfo[k]={};this._relatedInfo[k].relatedFeatures=
e[0].features;a.isDefined(e[1])&&(this._relatedInfo[k].relatedStatsFeatures=e[1].features)}},_handlerErrorResponse:function(a,b){a.reject(b)},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),b=a.slice(1));return b},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+a[0]+"/"+a[1]);return b}});c("extend-esri")&&(k.PopupInfo=k.PopupInfoTemplate=h);return h})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(h,n,e,p,g,c,l,b,q,a,k,w,z,x,y,r,d){var F,D,u=new (n([w,l],{curNode:null,activeStack:[],constructor:function(){var a=b.hitch(this,function(a){e.isDescendant(this.curNode,a)&&this.set("curNode",null);e.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});h.before(c,"empty",a);h.before(c,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,d=a.document&&a.document.body;if(d){var v=k("pointer-events")?"pointerdown":k("MSPointer")?
"MSPointerDown":k("touch-events")?"mousedown, touchstart":"mousedown",m=q(a.document,v,function(a){if(!a||!(a.target&&null==a.target.parentNode))c._onTouchNode(b||a.target,"mouse")}),s=q(d,"focusin",function(a){if(a.target.tagName){var f=a.target.tagName.toLowerCase();"#document"==f||"body"==f||(y.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),e=q(d,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){m.remove();s.remove();e.remove();d=m=
s=e=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<F+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(b.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<D+100||(this._clearActiveWidgetsTimer=setTimeout(b.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){D=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);g.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var d=p.get(a,"dijitPopupParent");if(d)a=r.byId(d).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===z.body())break;a=x.get(a.ownerDocument).frameElement}else{var v=a.getAttribute&&a.getAttribute("widgetId"),m=v&&r.byId(v);m&&!("mouse"==b&&m.get("disabled"))&&c.unshift(v);a=a.parentNode}}}catch(s){}this._setStack(c,
b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(F=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,v=a.length-1;if(a[v]!=c[d]){this.set("activeStack",a);var m;for(m=d;0<=m&&c[m]!=a[m];m--)if(d=r.byId(c[m]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),
this.emit("widget-blur",d,b);for(m++;m<=v;m++)if(d=r.byId(a[m]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));a(function(){var a=u.registerWin(x.get(document));k("ie")&&q(window,"unload",function(){a&&(a.remove(),a=null)})});d.focus=function(a){u.focus(a)};for(var t in u)/^_/.test(t)||(d.focus[t]="function"==typeof u[t]?b.hitch(u,t):u[t]);u.watch(function(a,b,c){d.focus[a]=c});return u})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(h,n,e,p,g,c){return h([c,g],{_onMap:function(c){var b=this.constructor._onMap,e;if(!b||!b.FINAL)delete this.constructor._onMap,b=this.registerConnectEvents(),b.FINAL=!0;c=c.toLowerCase();b[c]?e=this[b[c].method]:(c=this._onCamelCase(c),this[c]&&(e=c));return e},on:function(c,b){var e=this._onMap(c),a=c.replace(/\-/g,""),k="on"+a in this.domNode;return e||!k?this.inherited(arguments):this.own(p(this.domNode,a,b))[0]},emit:function(c,b,e){var a,k,p,h=c.toLowerCase(),g=this.constructor._onMap||
this.registerConnectEvents();k=this[this._onMap(h)];b=b||{};b.target||(b.target=this);k&&(g&&g[h])&&(this._onObj2Arr(function(){a=Array.prototype.slice.call(arguments)},g[h].argKeys)(b),p=n.mixin({},arguments),p[2]=a,p[0]=g[h].name.replace(/^on/,""));return this.inherited(p||arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(h,n,e,p,g,c,l,b,q,a,k,w,z,x,y,r){function d(a){return eval("("+a+")")}function F(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<u){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=u}return b}function D(a,b){var c=a.join();if(!t[c]){for(var d=[],m=0,s=a.length;m<s;m++){var f=a[m];d[d.length]=t[f]=t[f]||e.getObject(f)||~f.indexOf("/")&&(b?b(f):h(f))}m=d.shift();t[c]=d.length?m.createSubclass?m.createSubclass(d):m.extend.apply(m,d):m}return t[c]}
new Date("X");var u=0;q.after(e,"extend",function(){u++},!0);var t={},f={_clearCache:function(){u++;t={}},_functionFromScript:function(a,b){var c="",d="",m=a.getAttribute(b+"args")||a.getAttribute("args"),f=a.getAttribute("with"),m=(m||"").split(/\s*,\s*/);f&&f.length&&p.forEach(f.split(/\s*,\s*/),function(a){c+="with("+a+"){";d+="}"});return new Function(m,c+a.innerHTML+d)},instantiate:function(a,b,c){b=b||{};c=c||{};var d=(c.scope||n._scopeName)+"Type",m="data-"+(c.scope||n._scopeName)+"-",f=m+
"type",k=m+"mixins",e=[];p.forEach(a,function(a){var c=d in b?b[d]:a.getAttribute(f)||a.getAttribute(d);if(c){var m=a.getAttribute(k),c=m?[c].concat(m.split(/\s*,\s*/)):[c];e.push({node:a,types:c})}});return this._instantiate(e,b,c)},_instantiate:function(b,c,d,v){function m(a){!c._started&&!d.noStart&&p.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}b=p.map(b,function(a){var b=a.ctor||D(a.types,d.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(b,a.node,c,d,a.scripts,a.inherited)},this);return v?a(b).then(m):m(b)},construct:function(a,c,f,v,m,s){function l(a){D&&e.setObject(D,a);for(r=0;r<I.length;r++)q[I[r].advice||"after"](a,I[r].method,e.hitch(a,I[r].func),!0);for(r=0;r<M.length;r++)M[r].call(a);for(r=0;r<K.length;r++)a.watch(K[r].prop,K[r].func);for(r=0;r<L.length;r++)y(a,L[r].event,L[r].func);return a}var u=a&&a.prototype;v=v||{};var h={};v.defaults&&e.mixin(h,v.defaults);s&&e.mixin(h,s);var g;
z("dom-attributes-explicit")?g=c.attributes:z("dom-attributes-specified-flag")?g=p.filter(c.attributes,function(a){return a.specified}):(s=(/^input$|^img$/i.test(c.nodeName)?c:c.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),g=p.map(s.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==c.nodeName&&"value"==a||"enctype"==b?c.getAttribute(b):c.getAttributeNode(b).value}}));var t=v.scope||n._scopeName;
s="data-"+t+"-";var E={};"dojo"!==t&&(E[s+"props"]="data-dojo-props",E[s+"type"]="data-dojo-type",E[s+"mixins"]="data-dojo-mixins",E[t+"type"]="dojoType",E[s+"id"]="data-dojo-id");for(var r=0,w,t=[],D,J;w=g[r++];){var G=w.name,H=G.toLowerCase();w=w.value;switch(E[H]||H){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":J=w;break;case "data-dojo-id":case "jsid":D=w;break;case "data-dojo-attach-point":case "dojoattachpoint":h.dojoAttachPoint=w;break;case "data-dojo-attach-event":case "dojoattachevent":h.dojoAttachEvent=
w;break;case "class":h["class"]=c.className;break;case "style":h.style=c.style&&c.style.cssText;break;default:if(G in u||(G=F(a)[H]||G),G in u)switch(typeof u[G]){case "string":h[G]=w;break;case "number":h[G]=w.length?Number(w):NaN;break;case "boolean":h[G]="false"!=w.toLowerCase();break;case "function":""===w||-1!=w.search(/[^\w\.]+/i)?h[G]=new Function(w):h[G]=e.getObject(w,!1)||new Function(w);t.push(G);break;default:H=u[G],h[G]=H&&"length"in H?w?w.split(/\s*,\s*/):[]:H instanceof Date?""==w?new Date(""):
"now"==w?new Date:k.fromISOString(w):H instanceof b?n.baseUrl+w:d(w)}else h[G]=w}}for(g=0;g<t.length;g++)E=t[g].toLowerCase(),c.removeAttribute(E),c[E]=null;if(J)try{J=d.call(v.propsThis,"{"+J+"}"),e.mixin(h,J)}catch(N){throw Error(N.toString()+" in data-dojo-props\x3d'"+J+"'");}e.mixin(h,f);m||(m=a&&(a._noScript||u._noScript)?[]:x("\x3e script[type^\x3d'dojo/']",c));var I=[],M=[],K=[],L=[];if(m)for(r=0;r<m.length;r++)E=m[r],c.removeChild(E),f=E.getAttribute(s+"event")||E.getAttribute("event"),v=
E.getAttribute(s+"prop"),J=E.getAttribute(s+"method"),t=E.getAttribute(s+"advice"),g=E.getAttribute("type"),E=this._functionFromScript(E,s),f?"dojo/connect"==g?I.push({method:f,func:E}):"dojo/on"==g?L.push({event:f,func:E}):h[f]=E:"dojo/aspect"==g?I.push({method:J,advice:t,func:E}):"dojo/watch"==g?K.push({prop:v,func:E}):M.push(E);a=(m=a.markupFactory||u.markupFactory)?m(h,c,a):new a(h,c);return a.then?a.then(l):l(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,d=
c(a.parent),b={dir:b.getAttribute("dir")||d.dir,lang:b.getAttribute("lang")||d.lang,textDir:b.getAttribute(u)||d.textDir},m;for(m in b)b[m]&&(a.inherited[m]=b[m])}return a.inherited}var d=[],m=[],f={},k=(b.scope||n._scopeName)+"Type",e="data-"+(b.scope||n._scopeName)+"-",l=e+"type",u=e+"textdir",e=e+"mixins",g=a.firstChild,q=b.inherited;if(!q){var t=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&t(a.parentNode,b)},q={dir:t(a,"dir"),lang:t(a,"lang"),textDir:t(a,u)},r;for(r in q)q[r]||
delete q[r]}for(var q={inherited:q},x,y;;)if(g)if(1!=g.nodeType)g=g.nextSibling;else if(x&&"script"==g.nodeName.toLowerCase())(F=g.getAttribute("type"))&&/^dojo\/\w/i.test(F)&&x.push(g),g=g.nextSibling;else if(y)g=g.nextSibling;else{var F=g.getAttribute(l)||g.getAttribute(k);r=g.firstChild;if(!F&&(!r||3==r.nodeType&&!r.nextSibling))g=g.nextSibling;else{y=null;if(F){var H=g.getAttribute(e);x=H?[F].concat(H.split(/\s*,\s*/)):[F];try{y=D(x,b.contextRequire)}catch(N){}y||p.forEach(x,function(a){~a.indexOf("/")&&
!f[a]&&(f[a]=!0,m[m.length]=a)});H=y&&!y.prototype._noScript?[]:null;q={types:x,ctor:y,parent:q,node:g,scripts:H};q.inherited=c(q);d.push(q)}else q={node:g,scripts:x,parent:q};x=H;y=g.stopParser||y&&y.prototype.stopParser&&!b.template;g=r}}else{if(!q||!q.node)break;g=q.node.nextSibling;y=!1;q=q.parent;x=q.scripts}var I=new w;m.length?(z("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+m.join(", ")),(b.contextRequire||h)(m,function(){I.resolve(p.filter(d,function(a){if(!a.ctor)try{a.ctor=
D(a.types,b.contextRequire)}catch(c){}for(var d=a.parent;d&&!d.types;)d=d.parent;var m=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(m&&m.stopParser&&!b.template);a.instantiate=!d||d.instantiate&&d.instantiateChildren;return a.instantiate}))})):I.resolve(d);return I.promise},_require:function(a,b){var c=d("{"+a.innerHTML+"}"),f=[],m=[],k=new w,g=b&&b.contextRequire||h,l;for(l in c)f.push(l),m.push(c[l]);g(m,function(){for(var a=0;a<f.length;a++)e.setObject(f[a],arguments[a]);k.resolve(arguments)});
return k.promise},_scanAmd:function(a,b){var c=new w,d=c.promise;c.resolve(!0);var m=this;x("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return m._require(a,b)});a.parentNode.removeChild(a)});return d},parse:function(a,b){var d;!b&&a&&a.rootNode?(b=a,d=b.rootNode):a&&e.isObject(a)&&!("nodeType"in a)?b=a:d=a;d=d?c.byId(d):l.body();b=b||{};var f=b.template?{template:!0}:{},m=[],k=this,g=this._scanAmd(d,b).then(function(){return k.scan(d,b)}).then(function(a){return k._instantiate(a,
f,b,!0)}).then(function(a){return m=m.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});e.mixin(m,g);return m}};n.parser=f;g.parseOnLoad&&r(100,f,"parse");return f})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(h,n,e){return e("dijit.Destroyable",null,{destroy:function(e){this._destroyed=!0},own:function(){var e=["destroyRecursive","destroy","remove"];h.forEach(arguments,function(g){function c(){b.remove();
h.forEach(q,function(a){a.remove()})}var l,b=n.before(this,"destroy",function(a){g[l](a)}),q=[];g.then?(l="cancel",g.then(c,c)):h.forEach(e,function(a){"function"===typeof g[a]&&(l||(l=a),q.push(n.after(g,a,c,!0)))})},this);return arguments}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(h,n,e,p,g){return e("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,
_beforeFillContent:function(){if(this.widgetsInTemplate){var c=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);g.parse(c,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(p.hitch(this,function(c){this._startupWidgets=c;for(var b=0;b<c.length;b++)this._processTemplateNode(c[b],function(b,a){return b[a]},function(b,a,c){return a in
b?b.connect(b,a,c):b.on(a,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(c,e,b){return e(c,"dojoType")||e(c,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){h.forEach(this._startupWidgets,
function(c){c&&(!c._started&&c.startup)&&c.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(h,n,e,p,g,c,l,b){var q=n("dijit._TemplatedMixin",b,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,c=this;return l.substitute(a,this,
function(a,e){"!"==e.charAt(0)&&(a=p.getObject(e.substr(1),!1,c));if("undefined"==typeof a)throw Error(b+" template:"+e);return null==a?"":"!"==e.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=h(this.templatePath,{sanitize:!0}));var a=q.getCachedTemplate(this.templateString,
this._skipNodeCache,this.ownerDocument),b;if(p.isString(a)){if(b=e.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});q._templateCache={};q.getCachedTemplate=function(a,b,c){var g=q._templateCache,h=a,p=g[h];
if(p){try{if(!p.ownerDocument||p.ownerDocument==(c||document))return p}catch(r){}e.destroy(p)}a=l.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return g[h]=a;b=e.toDom(a,c);if(1!=b.nodeType)throw Error("Invalid template: "+a);return g[h]=b};c("ie")&&g(window,"unload",function(){var a=q._templateCache,b;for(b in a){var c=a[b];"object"==typeof c&&e.destroy(c);delete a[b]}});return q})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(h){return h.cache})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/domReady","dojo/_base/window"],function(h,n,e,p){e(function(){n("highcontrast")&&h.add(p.body(),"dijit_a11y")});return n})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(h,n,e,p,g,c,l,b){h=h([c,l],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(b,a){n.mixin(this,a);this.initialize(b,
a)},getTitle:function(b){var a;this.info&&(a=this.titleHasRelatedFields?"":this._getPopupValues(b,!0).title);return a||""},getContent:function(c){return this.info?(new b({template:this,graphic:c,chartTheme:this.chartTheme},p.create("div"))).domNode:""}});e("extend-esri")&&n.setObject("dijit.PopupTemplate",h,g);return h})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(h,n,e,p,g,c,l){g.add("highcontrast",function(){var b=
l.doc.createElement("div");b.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(n.blankGif||h.toUrl("./resources/blank.gif"))+'");';l.body().appendChild(b);var c=p.getComputedStyle(b),a=c.backgroundImage,c=c.borderTopColor==c.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a);8>=g("ie")?b.outerHTML="":l.body().removeChild(b);return c});c(function(){g("highcontrast")&&e.add(l.body(),"dj_a11y")});return g})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(h,n,e,p,g,c,l){c.extend(h,{waiRole:"",waiState:""});return g("dijit._Templated",[n,e],{widgetsInTemplate:!1,constructor:function(){l.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(b,c){var a=this.inherited(arguments),e=c(b,"waiRole");e&&b.setAttribute("role",e);(e=c(b,"waiState"))&&p.forEach(e.split(/\s*,\s*/),function(a){-1!=a.indexOf("-")&&(a=a.split("-"),b.setAttribute("aria-"+
a[0],a[1]))});return a}})})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(h,n,e,p){p.extend(n,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return e("dijit._FocusMixin",null,{_focusManager:h})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(h,n,e,p,g,c,l,b,q,a,k,w,z){function x(){}function y(a){return function(b,c,k,g){return b&&"string"==typeof c&&b[c]==x?b.on(c.substring(2).toLowerCase(),l.hitch(k,g)):a.apply(e,arguments)}}h.around(e,"connect",y);c.connect&&h.around(c,"connect",y);h=p("dijit._Widget",[k,w,z],{onClick:x,onDblClick:x,onKeyDown:x,onKeyPress:x,onKeyUp:x,onMouseDown:x,onMouseMove:x,onMouseOut:x,onMouseOver:x,onMouseLeave:x,onMouseEnter:x,onMouseUp:x,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
x&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===x?e.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){c.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){c.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?b("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});g("dijit-legacy-requires")&&q(0,function(){require(["dijit/_base"])});
return h})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dijit/_Widget dijit/_Templated ../kernel ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),function(h,n,e,p,g,c,l,b,q,a,k,w,z,x,y,r,d,F){var D=0;n=n([d,x,y],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=
p.mixin({},F.widgets.popup)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this.template.getComponents(this.graphic).then(p.hitch(this,this._handleComponentsSuccess),p.hitch(this,this._handleComponentsError))},destroy:function(){this._dfd&&this._dfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments)},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+
1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var b=this._mediaInfos,d=b.length,f=this.domNode,e=this._prevMedia,h=this._nextMedia;if(1<d){var l=0,v=0;g.forEach(b,function(a){"image"===a.type?l++:-1!==a.type.indexOf("chart")&&v++});l&&(a.set(this._imageCount,"innerHTML",l),c.query(".summary .image",f).removeClass("hidden"));v&&(a.set(this._chartCount,"innerHTML",v),c.query(".summary .chart",f).removeClass("hidden"))}else c.query(".summary",
f).addClass("hidden"),k.add(e,"hidden"),k.add(h,"hidden");b=this._mediaPtr;0===b?k.add(e,"hidden"):k.remove(e,"hidden");b===d-1?k.add(h,"hidden"):k.remove(h,"hidden");this._destroyFrame()},_displayMedia:function(){var b=this._mediaInfos[this._mediaPtr],d=b.title,f=b.caption,e=c.query(".mediaSection .hzLine",this.domNode)[0];a.set(this._mediaTitle,"innerHTML",d);k[d?"remove":"add"](this._mediaTitle,"hidden");a.set(this._mediaCaption,"innerHTML",f);k[f?"remove":"add"](this._mediaCaption,"hidden");k[d&&
f?"remove":"add"](e,"hidden");this._rid=null;if("image"===b.type)this._showImage(b.value);else{var g=this,d=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],f=b.value.theme||this.chartTheme;p.isString(f)&&(f=f.replace(/\./gi,"/"),-1===f.indexOf("/")&&(f="dojox/charting/themes/"+f));f||(f="./Rainbow");d.push(f);try{var l=this._rid=D++;h(d,function(a,c,d){l===g._rid&&(g._rid=null,g._showChart(b.type,b.value,a,c,d))})}catch(v){console.log("PopupRenderer: error loading modules")}}},_preventNewTab:function(a){return(a=
a&&p.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_showImage:function(b){k.add(this._mediaFrame,"image");var d=z.get(this._gallery,"height"),f="\x3cimg class\x3d'esriPopupMediaImage' src\x3d'"+b.sourceURL+"' /\x3e";b.linkURL&&(f="\x3ca "+(this._preventNewTab(b.linkURL)?"":"target\x3d'_blank' ")+"href\x3d'"+b.linkURL+"'\x3e"+f+"\x3c/a\x3e");a.set(this._mediaFrame,"innerHTML",f);var g=c.query(".esriPopupMediaImage",this._mediaFrame)[0],h=this,l;l=e.connect(g,"onload",function(){e.disconnect(l);
l=null;h._imageLoaded(g,d)})},_showChart:function(a,b,c,d,e){k.remove(this._mediaFrame,"image");c=this._chart=new c(w.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});e&&c.setTheme(e);switch(a){case "piechart":c.addPlot("default",{type:"Pie",labels:!1});c.addSeries("Series A",b.fields);break;case "linechart":c.addPlot("default",{type:"Markers"});c.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});
g.forEach(b.fields,function(a,b){a.x=b+1});c.addSeries("Series A",b.fields);break;case "columnchart":c.addPlot("default",{type:"Columns",gap:3});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.addSeries("Series A",b.fields);break;case "barchart":c.addPlot("default",{type:"Bars",gap:3}),c.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),c.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),c.addSeries("Series A",b.fields)}this._action=new d(c);
c.render()},_destroyFrame:function(){this._rid=null;this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);a.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(a,b){var c=a.height;c<b&&(c=Math.round((b-c)/2),z.set(a,"marginTop",c+"px"))},_attListHandler:function(b,c){if(b===this._dfd){this._dfd=null;var d="";!(c instanceof Error)&&(c&&c.length)&&g.forEach(c,function(a){d+="\x3cli\x3e";d+="\x3ca href\x3d'"+a.url+"' target\x3d'_blank'\x3e"+
(a.name||"[No name]")+"\x3c/a\x3e";d+="\x3c/li\x3e"});a.set(this._attachmentsList,"innerHTML",d||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_handleComponentsSuccess:function(b){if(b){var d=this.showTitle?b.title:"",e=b.description,l=b.fields,h=b.mediaInfos,n=this.domNode,v=this._nls,m=this,s=this.template,r=this.graphic;this._prevMedia.title=v.NLS_prevMedia;this._nextMedia.title=v.NLS_nextMedia;a.set(this._title,"innerHTML",d);d||k.add(this._title,"hidden");!e&&l&&(e="",g.forEach(l,function(a){e+=
"\x3ctr valign\x3d'top'\x3e";e+="\x3ctd class\x3d'attrName'\x3e"+a[0]+"\x3c/td\x3e";e+="\x3ctd class\x3d'attrValue'\x3e"+a[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+v.NLS_moreInfo+"\x3c/a\x3e")+"\x3c/td\x3e";e+="\x3c/tr\x3e"}),e&&(e="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+e+"\x3c/table\x3e"));a.set(this._description,"innerHTML",e);e||k.add(this._description,"hidden");c.query("a",this._description).forEach(function(b){m._preventNewTab(b.href)?
"_blank"===b.target&&a.remove(b,"target"):a.set(b,"target","_blank")});d&&e?c.query(".mainSection .hzLine",n).removeClass("hidden"):d||e?c.query(".mainSection .hzLine",n).addClass("hidden"):c.query(".mainSection",n).addClass("hidden");if(d=this._dfd=s.getAttachments(r))d.addBoth(p.hitch(this,this._attListHandler,d)),a.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+v.NLS_searching+"...\x3c/li\x3e"),c.query(".attachmentsSection",n).removeClass("hidden");h&&h.length&&(c.query(".mediaSection",n).removeClass("hidden"),
q.setSelectable(this._mediaFrame,!1),this._mediaInfos=h,this._mediaPtr=0,this._updateUI(),this._displayMedia());b.editSummary&&(a.set(this._editSummary,"innerHTML",b.editSummary),h&&h.length&&k.remove(this._mediaBreak,"hidden"),k.remove(this._editSummarySection,"hidden"))}},_handleComponentsError:function(a){console.log("PopupRenderer: error loading template",a)}});l("extend-esri")&&p.setObject("dijit._PopupRenderer",n,r);return n})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(h,n,e,p,g,c,l,b,q,a,k,w,z,x,y,r,d,F,D,u,t,f,A){function B(a){return function(c){b[c?"set":"remove"](this.domNode,a,c);this._set(a,c)}}z.add("dijit-legacy-requires",!x.isAsync);z.add("dojo-bidi",!1);z("dijit-legacy-requires")&&d(0,function(){h(["dijit/_base/manager"])});var C={};p=c("dijit._WidgetBase",[F,t],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:B("lang"),dir:"",_setDirAttr:B("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:p.blankGif||h.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},d;for(d in b.attributeMap)c.push(d);for(d in b)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+d.substr(5,
d.length-9),(!b.attributeMap||!(d in b.attributeMap))&&c.push(d))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=l.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,y.mixin(this,a));this.postMixInProperties();this.id||(this.id=A.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=u.body(this.ownerDocument);A.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&(d.parentNode&&this.domNode!==d)&&(d.parentNode.replaceChild(this.domNode,d),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);n.forEach(this.constructor._setterAttrs,
function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(n.map(a,function(a){return a+"Rtl"})));q.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,n.forEach(this.getChildren(),function(a){!a._started&&
(!a._destroyed&&y.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();n.forEach(this._connects,y.hitch(this,"disconnect"));n.forEach(this._supportingWidgets,b);this.domNode&&n.forEach(A.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);
A.remove(this.id);this._destroyed=!0},destroyRendering:function(c){this.bgIframe&&(this.bgIframe.destroy(c),delete this.bgIframe);this.domNode&&(c?b.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(c||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){n.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;y.isObject(a)?
w.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,c,d){d=3<=arguments.length?d:this.attributeMap[a];n.forEach(y.isArray(d)?d:[d],function(d){var e=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":y.isFunction(c)&&(c=y.hitch(this,c));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;e.tagName?b.set(e,d,c):e.set(d,c);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(c));
break;case "innerHTML":e.innerHTML=c;break;case "class":q.replace(e,c,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(y.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!y.isFunction(this.focusNode)?"focusNode":"domNode",f=this[d]&&this[d].tagName,g;if(g=f)if(!(g=
C[f])){g=this[d];var k={},h;for(h in g)k[h.toLowerCase()]=!0;g=C[f]=k}h=g;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:h&&c.l in h&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",
g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var d,e=this["on"+a];e&&(d=e.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&
r.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,b){var c=this._onMap(a);return c?e.after(this,c,b,!0):this.own(r(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?A.findWidgets(this.containerNode):
[]},getParent:function(){return A.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(g.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(D.subscribe(a,y.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:k.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=w.get(this.domNode,"display")},placeAt:function(b,c){var d=!b.tagName&&
A.byId(b);d&&d.addChild&&(!c||"number"===typeof c)?d.addChild(this,c):(d=d&&"domNode"in d?d.containerNode&&!/after|before|replace/.test(c||"")?d.containerNode:d.domNode:l.byId(b,this.ownerDocument),a.place(this.domNode,d,c),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(y.hitch(this,function(){c&&(c=null,this._destroyed||y.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});z("dojo-bidi")&&
p.extend(f);return p})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(h,n){var e={};h.setObject("dojo.date.stamp",e);e.fromISOString=function(h,g){e._isoRegExp||(e._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var c=e._isoRegExp.exec(h),l=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1E3);g&&(g=new Date(g),n.forEach(n.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return g["get"+a]()}),function(a,b){c[b]=c[b]||a}));l=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0,c[6]||0);100>c[0]&&l.setFullYear(c[0]||1970);var b=0,q=c[7]&&c[7].charAt(0);"Z"!=q&&(b=60*(c[8]||0)+(Number(c[9])||0),"-"!=q&&(b*=-1));q&&(b-=l.getTimezoneOffset());b&&l.setTime(l.getTime()+6E4*b)}return l};e.toISOString=function(e,g){var c=function(a){return 10>a?"0"+a:a};g=g||{};var h=[],b=g.zulu?"getUTC":"get",n="";"time"!=g.selector&&(n=e[b+"FullYear"](),n=["0000".substr((n+
"").length)+n,c(e[b+"Month"]()+1),c(e[b+"Date"]())].join("-"));h.push(n);if("date"!=g.selector){n=[c(e[b+"Hours"]()),c(e[b+"Minutes"]()),c(e[b+"Seconds"]())].join(":");b=e[b+"Milliseconds"]();g.milliseconds&&(n+="."+(100>b?"0":"")+c(b));if(g.zulu)n+="Z";else if("time"!=g.selector)var b=e.getTimezoneOffset(),a=Math.abs(b),n=n+((0<b?"-":"+")+c(Math.floor(a/60))+":"+c(a%60));h.push(n)}return h.join("T")};return e})},"*noref":1}});
define("esri/layers/GeoRSSLayer","dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../config ../request ./ServiceGeneratedFeatureCollection".split(" "),function(h,n,e,p,g,c,l,b){h=h([b],{declaredClass:"esri.layers.GeoRSSLayer",serviceUrl:location.protocol+"//utility.arcgis.com/sharing/rss",constructor:function(b,a){c.defaults.geoRSSService&&(this.serviceUrl=c.defaults.geoRSSService);this._createLayer()},parse:function(){return this._io=l({url:this.serviceUrl,content:{url:this.url,
refresh:this.loaded?!0:void 0,outSR:this._outSR?e.toJson(this._outSR.toJson()):void 0},callbackParamName:"callback"})},_initLayer:function(b){this.inherited(arguments);this.loaded||(this.loaded=!0,this.onLoad(this))}});p("extend-esri")&&n.setObject("layers.GeoRSSLayer",h,g);return h});